# Day 1 - Lab 1 : Azure Key Vault Integration

DevIntersection Security Workshop

## Exercise 1: Azure Key Vault

1. Open the [Azure Portal](https://portal.azure.com)
2. Login using your provided lab credentials
3. Select the key vault
4. In the blade, select **Secrets**
5. TODO

## Exercise 2: Managed Service Identity (MSI) Integration

1. Login using your provided lab credentials
2. Select the **paw-1** virtual machine
3. In the blade, select **Identity**
4. Select **System Managed**
5. Select **OK**
6. Select the **wssecuritySUFFIX** app service
7. In the blade, select **Identity**
8. Select **System Managed**
9. Select **OK**
10. Switch to the Azure Key Vault
11. Select **Access Policies**
12. TODO

## Exercise 3: Access Key Vault using MSI (Virtual Machine)

1. Login to your **paw-1** virtual machine
2. Run the following PowerShell script

```PowerShell

```

You should see the Key Vault value displayed in the PowerShell window.  The libraries used in the PowerShell script utilized the MSI identity of the virtual machine to access the key vault.

## Exercise 4: Access Key Vault using MSI (Web App)

1. TODO

> *NOTE* Key Vault references currently only support system-assigned managed identities. User-assigned identities cannot be used.

## Reference Links

- [Azure Key Vault](https://docs.microsoft.com/en-us/azure/key-vault/general/basic-concepts)
- [Managed Service Identities](https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview)
- [Azure Key Vault Reference](https://docs.microsoft.com/en-us/azure/app-service/app-service-key-vault-references)
